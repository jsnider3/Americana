<!doctype html>
<html>
  <head>
    <title>Americana</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  </head>
  <body>
    <h1> Which country is more American? </h1>
    <div id="countryOne">
    <figure>
      <img src='https://upload.wikimedia.org/wikipedia/commons/2/28/InternetSlowdown_Day.gif'
        alt='Waiting for server' />
      <figcaption>Loading</figcaption>
    </figure>
    </div>
    <div id="countryTwo">
    <figure>
      <img src='https://upload.wikimedia.org/wikipedia/commons/2/28/InternetSlowdown_Day.gif'
        alt='Waiting for server' />
      <figcaption>Loading</figcaption>
    </figure>
    </div>
    <script>
    "use strict";
    var countryOneID = Math.floor(Math.random() * 196);
    var countryTwoID = Math.floor(Math.random() * 195);
    if (countryOneID == countryTwoID) {
      countryTwoID = (countryTwoID + 1) % 195;
    }
    console.log(countryOneID + " " + countryTwoID);
    var makeFigure = function(data) {
      console.log("Making figure");
      return "<figure><img src='" + data.image + "' alt='" + data.name +
        "' /> <figcaption>" + data.name + "</figcaption> </figure>"
    };
    console.log("Doing the thing.");
    $(document).ready(function() {
      $.getJSON('/main?countryID=' + countryOneID, function(data) {
        console.log("updating country one");
        $('#countryOne').html(makeFigure(data));
      });
      $.getJSON('/main?countryID=' + countryTwoID, function(data) {
        console.log("updating country two");
        $('#countryTwo').html(makeFigure(data));
      });
    });
    </script>
  </body>
</html>
